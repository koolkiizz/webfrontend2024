import{u as f,j as s,B as w,b}from"./index-D9z5yxni.js";import{o as y,s as t,a as P,t as F,u as S,F as k,b as i,c,d as m,e as l,I as d,g as O,f as p}from"./use-alert-DmuxVXq_.js";import{u as E,e as T,C as L,a as N}from"./fetch-CS35l4et.js";function U(){const{executePost:r,isLoading:n,isError:h}=E(T.register());return{register:async x=>await r(x),isLoading:n,isError:h}}const I=y({username:t().min(2,{message:"Username phải có ít nhất 2 ký tự"}),email:t().email({message:"Vui lòng nhập địa chỉ Email."}),password:t().min(6,{message:"Password phải có ít nhất 6 ký tự."}),confirmPassword:t()}).refine(r=>r.password===r.confirmPassword,{message:"Mật khẩu không chính xác",path:["confirmPassword"]}),v=()=>{const r=P({resolver:F(I),defaultValues:{username:"",email:"",password:"",confirmPassword:""}}),n=S(),h=f(),{register:g}=U(),x=async e=>{let o;try{if(o=await g({username:e.username,password:e.password,repassword:e.confirmPassword,email:e.email}),o!=null&&o.success){n.success("Thành công",o==null?void 0:o.message),h(b.LOGIN);return}n.error("Lỗi",o==null?void 0:o.message)}catch(a){let u="Đăng ký không thành công";if(N.isAxiosError(a)&&a.status==422&&Object.prototype.hasOwnProperty.call(a,"response")&&Object.prototype.hasOwnProperty.call(a.response,"data")&&Object.prototype.hasOwnProperty.call(a.response.data,"errors"))for(var j in a.response.data.errors)u+="<br>",u+=j+": "+a.response.data.errors[j][0];n.error("Lỗi",u)}};return s.jsx(k,{...r,children:s.jsxs("form",{onSubmit:r.handleSubmit(x),className:"space-y-8 w-full rounded-lg border bg-card text-card-foreground shadow-md p-8 bg-[#1b1e2b] border-color-[#495070]",children:[s.jsx(L,{children:"Đăng ký"}),s.jsx(i,{control:r.control,name:"username",render:({field:e})=>s.jsxs(c,{children:[s.jsx(m,{children:"Username"}),s.jsx(l,{children:s.jsx(d,{placeholder:"easygun",...e})}),s.jsx(O,{children:"Tên hiển thị trên hệ thống."}),s.jsx(p,{})]})}),s.jsx(i,{control:r.control,name:"email",render:({field:e})=>s.jsxs(c,{children:[s.jsx(m,{children:"Email"}),s.jsx(l,{children:s.jsx(d,{type:"email",placeholder:"easygun@example.com",...e})}),s.jsx(p,{})]})}),s.jsx(i,{control:r.control,name:"password",render:({field:e})=>s.jsxs(c,{children:[s.jsx(m,{children:"Mật khẩu"}),s.jsx(l,{children:s.jsx(d,{type:"password",...e})}),s.jsx(p,{})]})}),s.jsx(i,{control:r.control,name:"confirmPassword",render:({field:e})=>s.jsxs(c,{children:[s.jsx(m,{children:"Nhập lại mật khẩu"}),s.jsx(l,{children:s.jsx(d,{type:"password",...e})}),s.jsx(p,{})]})}),s.jsx(w,{type:"submit",disabled:r.formState.isSubmitting,children:r.formState.isSubmitting?"Đang xử lý...":"Đăng Ký"})]})})},A=()=>s.jsx("div",{className:"flex md:min-w-[500px] md:max-w-[600px] px-[12px] mx-auto mt-[10vh]",children:s.jsx(v,{})});export{A as default};
