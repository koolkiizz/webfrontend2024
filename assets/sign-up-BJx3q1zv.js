import{k as u,i as p,j as s,B as j,m as f}from"./index-Bn_bHuoN.js";import{o as w,s as o,t as k,F as b,a as t,c as a,d as i,e as c,g as y,f as m}from"./form-Cx6pTLvW.js";import{u as F,I as l}from"./input-C4CD33dg.js";import{u as P,e as S}from"./fetch-CWuzVEnS.js";import{b as E}from"./card-DIz8FuQ8.js";function T(){const{executePost:e,isLoading:n,isError:d}=P(S.register());return{register:async h=>{const r=await e(h);if(r!=null&&r.success)return r==null?void 0:r.success;throw new Error(r==null?void 0:r.message)},isLoading:n,isError:d}}const N=w({username:o().min(2,{message:"Username phải có ít nhất 2 ký tự"}),email:o().email({message:"Vui lòng nhập địa chỉ Email."}),password:o().min(6,{message:"Password phải có ít nhất 6 ký tự."}),confirmPassword:o()}).refine(e=>e.password===e.confirmPassword,{message:"Mật khẩu không chính xác",path:["confirmPassword"]}),U=()=>{const e=F({resolver:k(N),defaultValues:{username:"",email:"",password:"",confirmPassword:""}}),{toast:n}=u(),d=p(),{register:x}=T(),h=async r=>{try{if(!await x({username:r.username,password:r.password,repassword:r.confirmPassword,email:r.email})){n({title:"Đăng ký không thành công. Vui lòng thử lại!"});return}n({title:"Đăng ký thành công. Vui lòng đăng nhập vào hệ thống."}),d(f.LOGIN)}catch{n({title:"Đăng ký không thành công. Vui lòng thử lại!"})}};return s.jsx(b,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(h),className:"space-y-8 w-full rounded-lg border bg-card text-card-foreground shadow-md p-8 bg-[#1b1e2b] border-color-[#495070]",children:[s.jsx(E,{children:"Đăng ký"}),s.jsx(t,{control:e.control,name:"username",render:({field:r})=>s.jsxs(a,{children:[s.jsx(i,{children:"Username"}),s.jsx(c,{children:s.jsx(l,{placeholder:"easygun",...r})}),s.jsx(y,{children:"Tên hiển thị trên hệ thống."}),s.jsx(m,{})]})}),s.jsx(t,{control:e.control,name:"email",render:({field:r})=>s.jsxs(a,{children:[s.jsx(i,{children:"Email"}),s.jsx(c,{children:s.jsx(l,{type:"email",placeholder:"easygun@example.com",...r})}),s.jsx(m,{})]})}),s.jsx(t,{control:e.control,name:"password",render:({field:r})=>s.jsxs(a,{children:[s.jsx(i,{children:"Mật khẩu"}),s.jsx(c,{children:s.jsx(l,{type:"password",...r})}),s.jsx(m,{})]})}),s.jsx(t,{control:e.control,name:"confirmPassword",render:({field:r})=>s.jsxs(a,{children:[s.jsx(i,{children:"Nhập lại mật khẩu"}),s.jsx(c,{children:s.jsx(l,{type:"password",...r})}),s.jsx(m,{})]})}),s.jsx(j,{type:"submit",children:"Đăng Ký"})]})})},R=()=>(console.log("check token"),s.jsx("div",{className:"flex md:min-w-[500px] md:max-w-[600px] px-[12px] mx-auto mt-[10vh]",children:s.jsx(U,{})}));export{R as default};
