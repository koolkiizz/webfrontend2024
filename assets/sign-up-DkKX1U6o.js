import{d as b,u as y,j as s,B as P,b as S}from"./index-DyOiOGPz.js";import{o as F,s as t,a as k,t as O,u as E,F as T,b as m,c as d,d as l,e as p,I as h,g as L,f as x}from"./use-alert-vNlQZNcX.js";import{u as N,e as U}from"./fetch-GdoP7LyA.js";import{C as I,a as v}from"./utils-CmQ-S6PF.js";function C(){const{executePost:n,isLoading:i,isError:e}=N(U.register());return{register:async u=>await n(u),isLoading:i,isError:e}}const M=F({username:t().min(2,{message:"Username phải có ít nhất 2 ký tự"}),email:t().email({message:"Vui lòng nhập địa chỉ Email."}),password:t().min(6,{message:"Password phải có ít nhất 6 ký tự."}),confirmPassword:t(),refcode:t()}).refine(n=>n.password===n.confirmPassword,{message:"Mật khẩu không chính xác",path:["confirmPassword"]}),R=()=>{const[n]=b(),i=n.get("ref")??"",e=k({resolver:O(M),defaultValues:{username:"",email:"",password:"",confirmPassword:"",refcode:i}}),c=E(),u=y(),{register:f}=C(),w=async r=>{let o;try{if(o=await f({username:r.username,password:r.password,repassword:r.confirmPassword,email:r.email,refcode:i}),o!=null&&o.success){c.success("Thành công",o==null?void 0:o.message),u(S.LOGIN);return}c.error("Lỗi",o==null?void 0:o.message)}catch(a){let g="Đăng ký không thành công";if(v.isAxiosError(a)&&a.status==422&&Object.prototype.hasOwnProperty.call(a,"response")&&Object.prototype.hasOwnProperty.call(a.response,"data")&&Object.prototype.hasOwnProperty.call(a.response.data,"errors"))for(var j in a.response.data.errors)g+="<br>",g+=j+": "+a.response.data.errors[j][0];c.error("Lỗi",g)}};return s.jsx(T,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(w),className:"space-y-8 w-full rounded-lg border bg-card text-card-foreground shadow-md p-8 bg-[#1b1e2b] border-color-[#495070]",children:[s.jsx(I,{children:"Đăng ký"}),s.jsx(m,{control:e.control,name:"username",render:({field:r})=>s.jsxs(d,{children:[s.jsx(l,{children:"Username"}),s.jsx(p,{children:s.jsx(h,{placeholder:"easygun",...r})}),s.jsx(L,{children:"Tên hiển thị trên hệ thống."}),s.jsx(x,{})]})}),s.jsx(m,{control:e.control,name:"email",render:({field:r})=>s.jsxs(d,{children:[s.jsx(l,{children:"Email"}),s.jsx(p,{children:s.jsx(h,{type:"email",placeholder:"easygun@example.com",...r})}),s.jsx(x,{})]})}),s.jsx(m,{control:e.control,name:"password",render:({field:r})=>s.jsxs(d,{children:[s.jsx(l,{children:"Mật khẩu"}),s.jsx(p,{children:s.jsx(h,{type:"password",...r})}),s.jsx(x,{})]})}),s.jsx(m,{control:e.control,name:"confirmPassword",render:({field:r})=>s.jsxs(d,{children:[s.jsx(l,{children:"Nhập lại mật khẩu"}),s.jsx(p,{children:s.jsx(h,{type:"password",...r})}),s.jsx(x,{})]})}),s.jsx(P,{type:"submit",disabled:e.formState.isSubmitting,children:e.formState.isSubmitting?"Đang xử lý...":"Đăng Ký"})]})})},G=()=>s.jsx("div",{className:"flex md:min-w-[500px] md:max-w-[600px] px-[12px] mx-auto mt-[10vh]",children:s.jsx(R,{})});export{G as default};
